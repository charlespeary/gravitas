[GLOBAL][NAME=closureMethod]
+---------------+----------------+----------------+
| Name          | Arity          |                |
+---------------+----------------+----------------+
| closureMethod | 0              |                |
+---------------+----------------+----------------+
| OPCODE        | CONSTANT INDEX | CONSTANT VALUE |
+---------------+----------------+----------------+
| CONSTANT_0    | 0              | 5              |
+---------------+----------------+----------------+
| RET           | -              | -              |
+---------------+----------------+----------------+
| NULL          | -              | -              |
+---------------+----------------+----------------+
| RET           | -              | -              |
+---------------+----------------+----------------+

[GLOBAL][NAME=makeObject]
+-----------------+----------------+------------------+
| Name            | Arity          |                  |
+-----------------+----------------+------------------+
| makeObject      | 0              |                  |
+-----------------+----------------+------------------+
| OPCODE          | CONSTANT INDEX | CONSTANT VALUE   |
+-----------------+----------------+------------------+
| CONSTANT_0      | 0              | 10               |
+-----------------+----------------+------------------+
| CONSTANT_1      | 1              | 20               |
+-----------------+----------------+------------------+
| CONSTANT_2      | 2              | global_ptr::0    |
+-----------------+----------------+------------------+
| CLOSURE_0       | 3              | local_address::1 |
+-----------------+----------------+------------------+
| CONSTANT_3      | 4              | x                |
+-----------------+----------------+------------------+
| GET             | 5              | local_address::2 |
+-----------------+----------------+------------------+
| CONSTANT_4      | 6              | y                |
+-----------------+----------------+------------------+
| CONSTANT_5      | 7              | local_address::3 |
+-----------------+----------------+------------------+
| GET             | 8              | closureMethod    |
+-----------------+----------------+------------------+
| CONSTANT_6      | 9              | 20               |
+-----------------+----------------+------------------+
| CONSTANT_7      | 10             | nested           |
+-----------------+----------------+------------------+
| GET             | 11             | z                |
+-----------------+----------------+------------------+
| CONSTANT_8      | -              | -                |
+-----------------+----------------+------------------+
| CONSTANT_9      | -              | -                |
+-----------------+----------------+------------------+
| CONSTANT_10     | -              | -                |
+-----------------+----------------+------------------+
| CREATE_OBJECT_1 | -              | -                |
+-----------------+----------------+------------------+
| CONSTANT_11     | -              | -                |
+-----------------+----------------+------------------+
| CREATE_OBJECT_4 | -              | -                |
+-----------------+----------------+------------------+
| RET             | -              | -                |
+-----------------+----------------+------------------+
| NULL            | -              | -                |
+-----------------+----------------+------------------+
| RET             | -              | -                |
+-----------------+----------------+------------------+

[GLOBAL][NAME=main]
+------------------------+----------------+------------------+
| Name                   | Arity          |                  |
+------------------------+----------------+------------------+
| main                   | 0              |                  |
+------------------------+----------------+------------------+
| OPCODE                 | CONSTANT INDEX | CONSTANT VALUE   |
+------------------------+----------------+------------------+
| CONSTANT_0             | 0              | global_ptr::1    |
+------------------------+----------------+------------------+
| CLOSURE_0              | 1              | local_address::0 |
+------------------------+----------------+------------------+
| CONSTANT_1             | 2              | local_address::1 |
+------------------------+----------------+------------------+
| GET                    | 3              | closureMethod    |
+------------------------+----------------+------------------+
| CALL                   | -              | -                |
+------------------------+----------------+------------------+
| CONSTANT_2             | -              | -                |
+------------------------+----------------+------------------+
| GET                    | -              | -                |
+------------------------+----------------+------------------+
| CONSTANT_3             | -              | -                |
+------------------------+----------------+------------------+
| GET_PROPERTY_BIND_true | -              | -                |
+------------------------+----------------+------------------+
| CALL                   | -              | -                |
+------------------------+----------------+------------------+

[CALL_STACK][NEW FRAME][NAME=main][RETURN_IP=0][STACK_START=0]
[VM][START OF EXECUTION][NAME=main]
[OPCODE][NEXT]: CONSTANT_0
[STACK][PUSH] global ptr: 1

+-------+-------------+
| INDEX | STACK VALUE |
+-------+-------------+

[VM][MOVE_POINTER][IP_NOW = 0][DISTANCE = 1]
[VM] TICK
[OPCODE][NEXT]: CLOSURE_0
[STACK][POP] Some(GlobalPointer(1))

+-------+-------------+
| INDEX | STACK VALUE |
+-------+-------------+

[STACK][PUSH] heap ptr: 1

+-------+-------------+
| INDEX | STACK VALUE |
+-------+-------------+

[VM][MOVE_POINTER][IP_NOW = 1][DISTANCE = 1]
[VM] TICK
[OPCODE][NEXT]: CONSTANT_1
[STACK][PUSH] local_address::0

+-------+-------------+
| INDEX | STACK VALUE |
+-------+-------------+
| 0     | heap ptr: 1 |
+-------+-------------+

[VM][MOVE_POINTER][IP_NOW = 2][DISTANCE = 1]
[VM] TICK
[OPCODE][NEXT]: GET
[STACK][POP] Some(MemoryAddress(Local(0)))

+-------+-------------+
| INDEX | STACK VALUE |
+-------+-------------+
| 0     | heap ptr: 1 |
+-------+-------------+

[STACK][GET_LOCAL_VARIABLE][ADDRESS=0][VALUE=heap ptr: 1]
[STACK][PUSH] heap ptr: 1

+-------+-------------+
| INDEX | STACK VALUE |
+-------+-------------+
| 0     | heap ptr: 1 |
+-------+-------------+

[VM][MOVE_POINTER][IP_NOW = 3][DISTANCE = 1]
[VM] TICK
[OPCODE][NEXT]: CALL
[STACK][POP] Some(HeapPointer(1))

+-------+-------------+
| INDEX | STACK VALUE |
+-------+-------------+
| 0     | heap ptr: 1 |
+-------+-------------+

[VM][CALL][FUNCTION][NAME=makeObject]
[STACK][PUSH] heap ptr: 1

+-------+-------------+
| INDEX | STACK VALUE |
+-------+-------------+
| 0     | heap ptr: 1 |
+-------+-------------+

[CALL_STACK][NEW FRAME][NAME=makeObject][RETURN_IP=4][STACK_START=1]
[VM] TICK
[OPCODE][NEXT]: CONSTANT_0
[STACK][PUSH] 10

+-------+-------------+
| INDEX | STACK VALUE |
+-------+-------------+
| 0     | heap ptr: 1 |
+-------+-------------+
| 1     | heap ptr: 1 |
+-------+-------------+

[VM][MOVE_POINTER][IP_NOW = 0][DISTANCE = 1]
[VM] TICK
[OPCODE][NEXT]: CONSTANT_1
[STACK][PUSH] 20

+-------+-------------+
| INDEX | STACK VALUE |
+-------+-------------+
| 0     | heap ptr: 1 |
+-------+-------------+
| 1     | heap ptr: 1 |
+-------+-------------+
| 2     | 10          |
+-------+-------------+

[VM][MOVE_POINTER][IP_NOW = 1][DISTANCE = 1]
[VM] TICK
[OPCODE][NEXT]: CONSTANT_2
[STACK][PUSH] global ptr: 0

+-------+-------------+
| INDEX | STACK VALUE |
+-------+-------------+
| 0     | heap ptr: 1 |
+-------+-------------+
| 1     | heap ptr: 1 |
+-------+-------------+
| 2     | 10          |
+-------+-------------+
| 3     | 20          |
+-------+-------------+

[VM][MOVE_POINTER][IP_NOW = 2][DISTANCE = 1]
[VM] TICK
[OPCODE][NEXT]: CLOSURE_0
[STACK][POP] Some(GlobalPointer(0))

+-------+-------------+
| INDEX | STACK VALUE |
+-------+-------------+
| 0     | heap ptr: 1 |
+-------+-------------+
| 1     | heap ptr: 1 |
+-------+-------------+
| 2     | 10          |
+-------+-------------+
| 3     | 20          |
+-------+-------------+

[STACK][PUSH] heap ptr: 2

+-------+-------------+
| INDEX | STACK VALUE |
+-------+-------------+
| 0     | heap ptr: 1 |
+-------+-------------+
| 1     | heap ptr: 1 |
+-------+-------------+
| 2     | 10          |
+-------+-------------+
| 3     | 20          |
+-------+-------------+

[VM][MOVE_POINTER][IP_NOW = 3][DISTANCE = 1]
[VM] TICK
[OPCODE][NEXT]: CONSTANT_3
[STACK][PUSH] local_address::1

+-------+-------------+
| INDEX | STACK VALUE |
+-------+-------------+
| 0     | heap ptr: 1 |
+-------+-------------+
| 1     | heap ptr: 1 |
+-------+-------------+
| 2     | 10          |
+-------+-------------+
| 3     | 20          |
+-------+-------------+
| 4     | heap ptr: 2 |
+-------+-------------+

[VM][MOVE_POINTER][IP_NOW = 4][DISTANCE = 1]
[VM] TICK
[OPCODE][NEXT]: GET
[STACK][POP] Some(MemoryAddress(Local(1)))

+-------+-------------+
| INDEX | STACK VALUE |
+-------+-------------+
| 0     | heap ptr: 1 |
+-------+-------------+
| 1     | heap ptr: 1 |
+-------+-------------+
| 2     | 10          |
+-------+-------------+
| 3     | 20          |
+-------+-------------+
| 4     | heap ptr: 2 |
+-------+-------------+

[STACK][GET_LOCAL_VARIABLE][ADDRESS=2][VALUE=10]
[STACK][PUSH] 10

+-------+-------------+
| INDEX | STACK VALUE |
+-------+-------------+
| 0     | heap ptr: 1 |
+-------+-------------+
| 1     | heap ptr: 1 |
+-------+-------------+
| 2     | 10          |
+-------+-------------+
| 3     | 20          |
+-------+-------------+
| 4     | heap ptr: 2 |
+-------+-------------+

[VM][MOVE_POINTER][IP_NOW = 5][DISTANCE = 1]
[VM] TICK
[OPCODE][NEXT]: CONSTANT_4
[STACK][PUSH] x

+-------+-------------+
| INDEX | STACK VALUE |
+-------+-------------+
| 0     | heap ptr: 1 |
+-------+-------------+
| 1     | heap ptr: 1 |
+-------+-------------+
| 2     | 10          |
+-------+-------------+
| 3     | 20          |
+-------+-------------+
| 4     | heap ptr: 2 |
+-------+-------------+
| 5     | 10          |
+-------+-------------+

[VM][MOVE_POINTER][IP_NOW = 6][DISTANCE = 1]
[VM] TICK
[OPCODE][NEXT]: CONSTANT_5
[STACK][PUSH] local_address::2

+-------+-------------+
| INDEX | STACK VALUE |
+-------+-------------+
| 0     | heap ptr: 1 |
+-------+-------------+
| 1     | heap ptr: 1 |
+-------+-------------+
| 2     | 10          |
+-------+-------------+
| 3     | 20          |
+-------+-------------+
| 4     | heap ptr: 2 |
+-------+-------------+
| 5     | 10          |
+-------+-------------+
| 6     | x           |
+-------+-------------+

[VM][MOVE_POINTER][IP_NOW = 7][DISTANCE = 1]
[VM] TICK
[OPCODE][NEXT]: GET
[STACK][POP] Some(MemoryAddress(Local(2)))

+-------+-------------+
| INDEX | STACK VALUE |
+-------+-------------+
| 0     | heap ptr: 1 |
+-------+-------------+
| 1     | heap ptr: 1 |
+-------+-------------+
| 2     | 10          |
+-------+-------------+
| 3     | 20          |
+-------+-------------+
| 4     | heap ptr: 2 |
+-------+-------------+
| 5     | 10          |
+-------+-------------+
| 6     | x           |
+-------+-------------+

[STACK][GET_LOCAL_VARIABLE][ADDRESS=3][VALUE=20]
[STACK][PUSH] 20

+-------+-------------+
| INDEX | STACK VALUE |
+-------+-------------+
| 0     | heap ptr: 1 |
+-------+-------------+
| 1     | heap ptr: 1 |
+-------+-------------+
| 2     | 10          |
+-------+-------------+
| 3     | 20          |
+-------+-------------+
| 4     | heap ptr: 2 |
+-------+-------------+
| 5     | 10          |
+-------+-------------+
| 6     | x           |
+-------+-------------+

[VM][MOVE_POINTER][IP_NOW = 8][DISTANCE = 1]
[VM] TICK
[OPCODE][NEXT]: CONSTANT_6
[STACK][PUSH] y

+-------+-------------+
| INDEX | STACK VALUE |
+-------+-------------+
| 0     | heap ptr: 1 |
+-------+-------------+
| 1     | heap ptr: 1 |
+-------+-------------+
| 2     | 10          |
+-------+-------------+
| 3     | 20          |
+-------+-------------+
| 4     | heap ptr: 2 |
+-------+-------------+
| 5     | 10          |
+-------+-------------+
| 6     | x           |
+-------+-------------+
| 7     | 20          |
+-------+-------------+

[VM][MOVE_POINTER][IP_NOW = 9][DISTANCE = 1]
[VM] TICK
[OPCODE][NEXT]: CONSTANT_7
[STACK][PUSH] local_address::3

+-------+-------------+
| INDEX | STACK VALUE |
+-------+-------------+
| 0     | heap ptr: 1 |
+-------+-------------+
| 1     | heap ptr: 1 |
+-------+-------------+
| 2     | 10          |
+-------+-------------+
| 3     | 20          |
+-------+-------------+
| 4     | heap ptr: 2 |
+-------+-------------+
| 5     | 10          |
+-------+-------------+
| 6     | x           |
+-------+-------------+
| 7     | 20          |
+-------+-------------+
| 8     | y           |
+-------+-------------+

[VM][MOVE_POINTER][IP_NOW = 10][DISTANCE = 1]
[VM] TICK
[OPCODE][NEXT]: GET
[STACK][POP] Some(MemoryAddress(Local(3)))

+-------+-------------+
| INDEX | STACK VALUE |
+-------+-------------+
| 0     | heap ptr: 1 |
+-------+-------------+
| 1     | heap ptr: 1 |
+-------+-------------+
| 2     | 10          |
+-------+-------------+
| 3     | 20          |
+-------+-------------+
| 4     | heap ptr: 2 |
+-------+-------------+
| 5     | 10          |
+-------+-------------+
| 6     | x           |
+-------+-------------+
| 7     | 20          |
+-------+-------------+
| 8     | y           |
+-------+-------------+

[STACK][GET_LOCAL_VARIABLE][ADDRESS=4][VALUE=heap ptr: 2]
[STACK][PUSH] heap ptr: 2

+-------+-------------+
| INDEX | STACK VALUE |
+-------+-------------+
| 0     | heap ptr: 1 |
+-------+-------------+
| 1     | heap ptr: 1 |
+-------+-------------+
| 2     | 10          |
+-------+-------------+
| 3     | 20          |
+-------+-------------+
| 4     | heap ptr: 2 |
+-------+-------------+
| 5     | 10          |
+-------+-------------+
| 6     | x           |
+-------+-------------+
| 7     | 20          |
+-------+-------------+
| 8     | y           |
+-------+-------------+

[VM][MOVE_POINTER][IP_NOW = 11][DISTANCE = 1]
[VM] TICK
[OPCODE][NEXT]: CONSTANT_8
[STACK][PUSH] closureMethod

+-------+-------------+
| INDEX | STACK VALUE |
+-------+-------------+
| 0     | heap ptr: 1 |
+-------+-------------+
| 1     | heap ptr: 1 |
+-------+-------------+
| 2     | 10          |
+-------+-------------+
| 3     | 20          |
+-------+-------------+
| 4     | heap ptr: 2 |
+-------+-------------+
| 5     | 10          |
+-------+-------------+
| 6     | x           |
+-------+-------------+
| 7     | 20          |
+-------+-------------+
| 8     | y           |
+-------+-------------+
| 9     | heap ptr: 2 |
+-------+-------------+

[VM][MOVE_POINTER][IP_NOW = 12][DISTANCE = 1]
[VM] TICK
[OPCODE][NEXT]: CONSTANT_9
[STACK][PUSH] 20

+-------+---------------+
| INDEX | STACK VALUE   |
+-------+---------------+
| 0     | heap ptr: 1   |
+-------+---------------+
| 1     | heap ptr: 1   |
+-------+---------------+
| 2     | 10            |
+-------+---------------+
| 3     | 20            |
+-------+---------------+
| 4     | heap ptr: 2   |
+-------+---------------+
| 5     | 10            |
+-------+---------------+
| 6     | x             |
+-------+---------------+
| 7     | 20            |
+-------+---------------+
| 8     | y             |
+-------+---------------+
| 9     | heap ptr: 2   |
+-------+---------------+
| 10    | closureMethod |
+-------+---------------+

[VM][MOVE_POINTER][IP_NOW = 13][DISTANCE = 1]
[VM] TICK
[OPCODE][NEXT]: CONSTANT_10
[STACK][PUSH] nested

+-------+---------------+
| INDEX | STACK VALUE   |
+-------+---------------+
| 0     | heap ptr: 1   |
+-------+---------------+
| 1     | heap ptr: 1   |
+-------+---------------+
| 2     | 10            |
+-------+---------------+
| 3     | 20            |
+-------+---------------+
| 4     | heap ptr: 2   |
+-------+---------------+
| 5     | 10            |
+-------+---------------+
| 6     | x             |
+-------+---------------+
| 7     | 20            |
+-------+---------------+
| 8     | y             |
+-------+---------------+
| 9     | heap ptr: 2   |
+-------+---------------+
| 10    | closureMethod |
+-------+---------------+
| 11    | 20            |
+-------+---------------+

[VM][MOVE_POINTER][IP_NOW = 14][DISTANCE = 1]
[VM] TICK
[OPCODE][NEXT]: CREATE_OBJECT_1
[STACK][POP] Some(String("nested"))

+-------+---------------+
| INDEX | STACK VALUE   |
+-------+---------------+
| 0     | heap ptr: 1   |
+-------+---------------+
| 1     | heap ptr: 1   |
+-------+---------------+
| 2     | 10            |
+-------+---------------+
| 3     | 20            |
+-------+---------------+
| 4     | heap ptr: 2   |
+-------+---------------+
| 5     | 10            |
+-------+---------------+
| 6     | x             |
+-------+---------------+
| 7     | 20            |
+-------+---------------+
| 8     | y             |
+-------+---------------+
| 9     | heap ptr: 2   |
+-------+---------------+
| 10    | closureMethod |
+-------+---------------+
| 11    | 20            |
+-------+---------------+

[STACK][POP] Some(Number(20.0))

+-------+---------------+
| INDEX | STACK VALUE   |
+-------+---------------+
| 0     | heap ptr: 1   |
+-------+---------------+
| 1     | heap ptr: 1   |
+-------+---------------+
| 2     | 10            |
+-------+---------------+
| 3     | 20            |
+-------+---------------+
| 4     | heap ptr: 2   |
+-------+---------------+
| 5     | 10            |
+-------+---------------+
| 6     | x             |
+-------+---------------+
| 7     | 20            |
+-------+---------------+
| 8     | y             |
+-------+---------------+
| 9     | heap ptr: 2   |
+-------+---------------+
| 10    | closureMethod |
+-------+---------------+

[STACK][PUSH] heap ptr: 3

+-------+---------------+
| INDEX | STACK VALUE   |
+-------+---------------+
| 0     | heap ptr: 1   |
+-------+---------------+
| 1     | heap ptr: 1   |
+-------+---------------+
| 2     | 10            |
+-------+---------------+
| 3     | 20            |
+-------+---------------+
| 4     | heap ptr: 2   |
+-------+---------------+
| 5     | 10            |
+-------+---------------+
| 6     | x             |
+-------+---------------+
| 7     | 20            |
+-------+---------------+
| 8     | y             |
+-------+---------------+
| 9     | heap ptr: 2   |
+-------+---------------+
| 10    | closureMethod |
+-------+---------------+

[VM][MOVE_POINTER][IP_NOW = 15][DISTANCE = 1]
[VM] TICK
[OPCODE][NEXT]: CONSTANT_11
[STACK][PUSH] z

+-------+---------------+
| INDEX | STACK VALUE   |
+-------+---------------+
| 0     | heap ptr: 1   |
+-------+---------------+
| 1     | heap ptr: 1   |
+-------+---------------+
| 2     | 10            |
+-------+---------------+
| 3     | 20            |
+-------+---------------+
| 4     | heap ptr: 2   |
+-------+---------------+
| 5     | 10            |
+-------+---------------+
| 6     | x             |
+-------+---------------+
| 7     | 20            |
+-------+---------------+
| 8     | y             |
+-------+---------------+
| 9     | heap ptr: 2   |
+-------+---------------+
| 10    | closureMethod |
+-------+---------------+
| 11    | heap ptr: 3   |
+-------+---------------+

[VM][MOVE_POINTER][IP_NOW = 16][DISTANCE = 1]
[VM] TICK
[OPCODE][NEXT]: CREATE_OBJECT_4
[STACK][POP] Some(String("z"))

+-------+---------------+
| INDEX | STACK VALUE   |
+-------+---------------+
| 0     | heap ptr: 1   |
+-------+---------------+
| 1     | heap ptr: 1   |
+-------+---------------+
| 2     | 10            |
+-------+---------------+
| 3     | 20            |
+-------+---------------+
| 4     | heap ptr: 2   |
+-------+---------------+
| 5     | 10            |
+-------+---------------+
| 6     | x             |
+-------+---------------+
| 7     | 20            |
+-------+---------------+
| 8     | y             |
+-------+---------------+
| 9     | heap ptr: 2   |
+-------+---------------+
| 10    | closureMethod |
+-------+---------------+
| 11    | heap ptr: 3   |
+-------+---------------+

[STACK][POP] Some(HeapPointer(3))

+-------+---------------+
| INDEX | STACK VALUE   |
+-------+---------------+
| 0     | heap ptr: 1   |
+-------+---------------+
| 1     | heap ptr: 1   |
+-------+---------------+
| 2     | 10            |
+-------+---------------+
| 3     | 20            |
+-------+---------------+
| 4     | heap ptr: 2   |
+-------+---------------+
| 5     | 10            |
+-------+---------------+
| 6     | x             |
+-------+---------------+
| 7     | 20            |
+-------+---------------+
| 8     | y             |
+-------+---------------+
| 9     | heap ptr: 2   |
+-------+---------------+
| 10    | closureMethod |
+-------+---------------+

[STACK][POP] Some(String("closureMethod"))

+-------+-------------+
| INDEX | STACK VALUE |
+-------+-------------+
| 0     | heap ptr: 1 |
+-------+-------------+
| 1     | heap ptr: 1 |
+-------+-------------+
| 2     | 10          |
+-------+-------------+
| 3     | 20          |
+-------+-------------+
| 4     | heap ptr: 2 |
+-------+-------------+
| 5     | 10          |
+-------+-------------+
| 6     | x           |
+-------+-------------+
| 7     | 20          |
+-------+-------------+
| 8     | y           |
+-------+-------------+
| 9     | heap ptr: 2 |
+-------+-------------+

[STACK][POP] Some(HeapPointer(2))

+-------+-------------+
| INDEX | STACK VALUE |
+-------+-------------+
| 0     | heap ptr: 1 |
+-------+-------------+
| 1     | heap ptr: 1 |
+-------+-------------+
| 2     | 10          |
+-------+-------------+
| 3     | 20          |
+-------+-------------+
| 4     | heap ptr: 2 |
+-------+-------------+
| 5     | 10          |
+-------+-------------+
| 6     | x           |
+-------+-------------+
| 7     | 20          |
+-------+-------------+
| 8     | y           |
+-------+-------------+

[STACK][POP] Some(String("y"))

+-------+-------------+
| INDEX | STACK VALUE |
+-------+-------------+
| 0     | heap ptr: 1 |
+-------+-------------+
| 1     | heap ptr: 1 |
+-------+-------------+
| 2     | 10          |
+-------+-------------+
| 3     | 20          |
+-------+-------------+
| 4     | heap ptr: 2 |
+-------+-------------+
| 5     | 10          |
+-------+-------------+
| 6     | x           |
+-------+-------------+
| 7     | 20          |
+-------+-------------+

[STACK][POP] Some(Number(20.0))

+-------+-------------+
| INDEX | STACK VALUE |
+-------+-------------+
| 0     | heap ptr: 1 |
+-------+-------------+
| 1     | heap ptr: 1 |
+-------+-------------+
| 2     | 10          |
+-------+-------------+
| 3     | 20          |
+-------+-------------+
| 4     | heap ptr: 2 |
+-------+-------------+
| 5     | 10          |
+-------+-------------+
| 6     | x           |
+-------+-------------+

[STACK][POP] Some(String("x"))

+-------+-------------+
| INDEX | STACK VALUE |
+-------+-------------+
| 0     | heap ptr: 1 |
+-------+-------------+
| 1     | heap ptr: 1 |
+-------+-------------+
| 2     | 10          |
+-------+-------------+
| 3     | 20          |
+-------+-------------+
| 4     | heap ptr: 2 |
+-------+-------------+
| 5     | 10          |
+-------+-------------+

[STACK][POP] Some(Number(10.0))

+-------+-------------+
| INDEX | STACK VALUE |
+-------+-------------+
| 0     | heap ptr: 1 |
+-------+-------------+
| 1     | heap ptr: 1 |
+-------+-------------+
| 2     | 10          |
+-------+-------------+
| 3     | 20          |
+-------+-------------+
| 4     | heap ptr: 2 |
+-------+-------------+

[STACK][PUSH] heap ptr: 4

+-------+-------------+
| INDEX | STACK VALUE |
+-------+-------------+
| 0     | heap ptr: 1 |
+-------+-------------+
| 1     | heap ptr: 1 |
+-------+-------------+
| 2     | 10          |
+-------+-------------+
| 3     | 20          |
+-------+-------------+
| 4     | heap ptr: 2 |
+-------+-------------+

[VM][MOVE_POINTER][IP_NOW = 17][DISTANCE = 1]
[VM] TICK
[OPCODE][NEXT]: RET
[STACK][POP] Some(HeapPointer(4))

+-------+-------------+
| INDEX | STACK VALUE |
+-------+-------------+
| 0     | heap ptr: 1 |
+-------+-------------+
| 1     | heap ptr: 1 |
+-------+-------------+
| 2     | 10          |
+-------+-------------+
| 3     | 20          |
+-------+-------------+
| 4     | heap ptr: 2 |
+-------+-------------+

[CALL_STACK][REMOVE FRAME][NAME=makeObject][RETURN_IP=4][STACK_START=1]
[STACK][PUSH] heap ptr: 4

+-------+-------------+
| INDEX | STACK VALUE |
+-------+-------------+
| 0     | heap ptr: 1 |
+-------+-------------+

[VM][MOVE_POINTER][IP_NOW = 4][DISTANCE = 1]
[VM] TICK
[OPCODE][NEXT]: CONSTANT_2
[STACK][PUSH] local_address::1

+-------+-------------+
| INDEX | STACK VALUE |
+-------+-------------+
| 0     | heap ptr: 1 |
+-------+-------------+
| 1     | heap ptr: 4 |
+-------+-------------+

[VM][MOVE_POINTER][IP_NOW = 5][DISTANCE = 1]
[VM] TICK
[OPCODE][NEXT]: GET
[STACK][POP] Some(MemoryAddress(Local(1)))

+-------+-------------+
| INDEX | STACK VALUE |
+-------+-------------+
| 0     | heap ptr: 1 |
+-------+-------------+
| 1     | heap ptr: 4 |
+-------+-------------+

[STACK][GET_LOCAL_VARIABLE][ADDRESS=1][VALUE=heap ptr: 4]
[STACK][PUSH] heap ptr: 4

+-------+-------------+
| INDEX | STACK VALUE |
+-------+-------------+
| 0     | heap ptr: 1 |
+-------+-------------+
| 1     | heap ptr: 4 |
+-------+-------------+

[VM][MOVE_POINTER][IP_NOW = 6][DISTANCE = 1]
[VM] TICK
[OPCODE][NEXT]: CONSTANT_3
[STACK][PUSH] closureMethod

+-------+-------------+
| INDEX | STACK VALUE |
+-------+-------------+
| 0     | heap ptr: 1 |
+-------+-------------+
| 1     | heap ptr: 4 |
+-------+-------------+
| 2     | heap ptr: 4 |
+-------+-------------+

[VM][MOVE_POINTER][IP_NOW = 7][DISTANCE = 1]
[VM] TICK
[OPCODE][NEXT]: GET_PROPERTY_BIND_true
[STACK][POP] Some(String("closureMethod"))

+-------+-------------+
| INDEX | STACK VALUE |
+-------+-------------+
| 0     | heap ptr: 1 |
+-------+-------------+
| 1     | heap ptr: 4 |
+-------+-------------+
| 2     | heap ptr: 4 |
+-------+-------------+

[STACK][POP] Some(HeapPointer(4))

+-------+-------------+
| INDEX | STACK VALUE |
+-------+-------------+
| 0     | heap ptr: 1 |
+-------+-------------+
| 1     | heap ptr: 4 |
+-------+-------------+

[STACK][PUSH] heap ptr: 5

+-------+-------------+
| INDEX | STACK VALUE |
+-------+-------------+
| 0     | heap ptr: 1 |
+-------+-------------+
| 1     | heap ptr: 4 |
+-------+-------------+

[VM][MOVE_POINTER][IP_NOW = 8][DISTANCE = 1]
[VM] TICK
[OPCODE][NEXT]: CALL
[STACK][POP] Some(HeapPointer(5))

+-------+-------------+
| INDEX | STACK VALUE |
+-------+-------------+
| 0     | heap ptr: 1 |
+-------+-------------+
| 1     | heap ptr: 4 |
+-------+-------------+

[STACK][PUSH] heap ptr: 4

+-------+-------------+
| INDEX | STACK VALUE |
+-------+-------------+
| 0     | heap ptr: 1 |
+-------+-------------+
| 1     | heap ptr: 4 |
+-------+-------------+

[CALL_STACK][NEW FRAME][NAME=main][RETURN_IP=9][STACK_START=2]
[VM] TICK
[OPCODE][NEXT]: CONSTANT_0
[STACK][PUSH] 5

+-------+-------------+
| INDEX | STACK VALUE |
+-------+-------------+
| 0     | heap ptr: 1 |
+-------+-------------+
| 1     | heap ptr: 4 |
+-------+-------------+
| 2     | heap ptr: 4 |
+-------+-------------+

[VM][MOVE_POINTER][IP_NOW = 0][DISTANCE = 1]
[VM] TICK
[OPCODE][NEXT]: RET
[STACK][POP] Some(Number(5.0))

+-------+-------------+
| INDEX | STACK VALUE |
+-------+-------------+
| 0     | heap ptr: 1 |
+-------+-------------+
| 1     | heap ptr: 4 |
+-------+-------------+
| 2     | heap ptr: 4 |
+-------+-------------+

[CALL_STACK][REMOVE FRAME][NAME=main][RETURN_IP=9][STACK_START=2]
[STACK][PUSH] 5

+-------+-------------+
| INDEX | STACK VALUE |
+-------+-------------+
| 0     | heap ptr: 1 |
+-------+-------------+
| 1     | heap ptr: 4 |
+-------+-------------+

[VM][MOVE_POINTER][IP_NOW = 9][DISTANCE = 1]
[VM] TICK
[VM][END OF EXECUTION]
[STACK][POP] Some(Number(5.0))

+-------+-------------+
| INDEX | STACK VALUE |
+-------+-------------+
| 0     | heap ptr: 1 |
+-------+-------------+
| 1     | heap ptr: 4 |
+-------+-------------+

[VM][EXECUTION RESULT][VALUE=Ok(Number(5.0))]
